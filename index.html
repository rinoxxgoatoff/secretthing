import tkinter as tk
from tkinter import ttk, messagebox
import random
import string

# --- CONFIGURATION ORIGINALE ---
BG, PANEL, CARD = "#0f1720", "#111827", "#0b1220"
ACCENT, BTN_GREEN, BTN_RED = "#06b6d4", "#10b981", "#ef4444"
TEXT, SUBTEXT = "#e6eef6", "#9aa4af"

CRYPTO_EMOJI = [
    ("BTC", "‚Çø"), ("ETH", "‚¨¢"), ("LTC", "≈Å"),
    ("BNB", "üü°"), ("SOL", "‚óé"), ("USDT", "‚ÇÆ"),
    ("BCH", "…É"), ("DOGE", "√ê"), ("TRX", "üî∫"),
]

# --- TIMINGS STRICTS ---
FEED_INTERVAL_MS = 45            
# 1 Heure = 3 600 000 millisecondes
# Affiche un wallet trouv√© toutes les 10 secondes
FOUND_INTERVAL_MS = 10000

def generate_real_address(crypto_code):
    b58 = "123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"
    hex_chars = "0123456789abcdef"
    bech32 = "qpzry9x8gf2tvdw0s3jn54khce6mua7l"
    
    if crypto_code == "BTC":
        pref = random.choice(["1", "3", "bc1"])
        size = 28 if pref != "bc1" else 36
        return pref + ''.join(random.choice(b58 if pref != "bc1" else bech32) for _ in range(size))
    elif crypto_code == "LTC":
        pref = random.choice(["L", "M", "ltc1"])
        size = 30 if pref != "ltc1" else 38
        return pref + ''.join(random.choice(b58 if pref != "ltc1" else bech32) for _ in range(size))
    elif crypto_code in ["ETH", "USDT"]:
        return '0x' + ''.join(random.choice(hex_chars) for _ in range(40))
    elif crypto_code == "SOL":
        return ''.join(random.choice(b58) for _ in range(43))
    elif crypto_code == "DOGE":
        return 'D' + ''.join(random.choice(b58) for _ in range(33))
    elif crypto_code == "TRX":
        return 'T' + ''.join(random.choice(b58) for _ in range(33))
    elif crypto_code == "BNB":
        return 'bnb1' + ''.join(random.choice(bech32) for _ in range(38))
    return '0x' + ''.join(random.choice(hex_chars) for _ in range(35))

class CryptoUI(tk.Tk):
    def __init__(self):
        super().__init__()
        self.title("Crypto Wallet Scanner")
        self.configure(bg=BG)
        self.geometry("480x780")
        self.resizable(False, False)
        self.running = False
        self.iterations = 143243
        self.crypto_vars = []
        self.crypto_codes = []
        self._build_ui()
        self.counter_label.config(text=f"It√©rations : {self.iterations}")
        self.found_box.delete(0, tk.END)
        sol_addr = generate_real_address("SOL")
        self.found_box.insert(tk.END, f"FOUND ‚ñ∫ SOL ‚Ä¢ $154 ‚Ä¢ {sol_addr}")
        self.found_box.see(tk.END)

    def _build_ui(self):
        header = tk.Frame(self, bg=PANEL)
        header.place(relx=0.5, y=18, anchor=tk.N, width=440, height=64)
        tk.Label(header, text="Crypto Wallet Scanner", bg=PANEL, fg=TEXT, font=("Segoe UI", 16, "bold")).pack(side=tk.LEFT, padx=12)
        self.status_label = tk.Label(header, text="inactif", bg=PANEL, fg=ACCENT, font=("Segoe UI", 10, "bold"))
        self.status_label.pack(side=tk.RIGHT, padx=(0,12))

        panel = tk.Frame(self, bg=CARD)
        panel.place(relx=0.5, rely=0.14, anchor=tk.N, width=440, height=620)

        self.counter_label = tk.Label(panel, text="It√©rations : 0", bg=CARD, fg=SUBTEXT, font=("Segoe UI", 10))
        self.counter_label.pack(pady=10)

        grid_frame = tk.Frame(panel, bg=CARD)
        grid_frame.pack(pady=5)
        for i, (code, emoji) in enumerate(CRYPTO_EMOJI):
            var = tk.BooleanVar(value=True)
            tk.Checkbutton(grid_frame, text=f"{emoji} {code}", variable=var, bg=CARD, fg=TEXT, selectcolor=CARD, font=("Segoe UI", 9)).grid(row=i//3, column=i%3, padx=10, pady=5)
            self.crypto_vars.append(var)
            self.crypto_codes.append(code)

        tk.Label(panel, text="Feed", bg=CARD, fg=TEXT, font=("Segoe UI", 11, "bold")).pack(anchor="w", padx=15)
        self.feed_box = tk.Listbox(panel, height=10, bg="#061018", fg="#9fe6c5", bd=0, highlightthickness=0, font=("Consolas", 10))
        self.feed_box.pack(fill=tk.X, padx=15, pady=5)

        tk.Label(panel, text="Found", bg=CARD, fg=TEXT, font=("Segoe UI", 11, "bold")).pack(anchor="w", padx=15)
        self.found_box = tk.Listbox(panel, height=6, bg="#071018", fg=TEXT, bd=0, highlightthickness=0, font=("Consolas", 9))
        self.found_box.pack(fill=tk.X, padx=15, pady=5)

        btn_frame = tk.Frame(panel, bg=CARD)
        btn_frame.pack(pady=20)
        tk.Button(btn_frame, text="START", bg=BTN_GREEN, fg="white", font=("Segoe UI", 11, "bold"), command=self.start, width=10).pack(side=tk.LEFT, padx=10)
        tk.Button(btn_frame, text="STOP", bg=BTN_RED, fg="white", font=("Segoe UI", 11, "bold"), command=self.stop, width=10).pack(side=tk.LEFT, padx=10)
        # Bouton WITHDRAW supprim√©

    def start(self):
        if self.running: return
        self.running = True
        self.status_label.config(text="en cours", fg=ACCENT)
        self._feed_tick()
        # Le premier r√©sultat tombera exactement dans 1 heure
        self.after(FOUND_INTERVAL_MS, self._found_tick)

    def stop(self):
        self.running = False
        self.status_label.config(text="arr√™t√©", fg=SUBTEXT)

    def _feed_tick(self):
        if not self.running: return
        selected = [c for v, c in zip(self.crypto_vars, self.crypto_codes) if v.get()]
        if selected:
            coin = random.choice(selected)
            addr = generate_real_address(coin)
            self.feed_box.insert(tk.END, f"{coin.ljust(4)} ‚Ä¢ {addr}")
            self.feed_box.yview_moveto(1.0)
            if self.feed_box.size() > 50: self.feed_box.delete(0)
            self.iterations += 1
            self.counter_label.config(text=f"It√©rations : {self.iterations}")
        self.after(FEED_INTERVAL_MS, self._feed_tick)

    def _found_tick(self):
        if not self.running: return
        selected = [c for v, c in zip(self.crypto_vars, self.crypto_codes) if v.get()]
        if selected:
            coin = random.choice(selected)
            addr = generate_real_address(coin)
            self.found_box.insert(tk.END, f"FOUND ‚ñ∫ {coin} ‚Ä¢ ${random.randint(40,900)} ‚Ä¢ {addr}")
            self.found_box.see(tk.END)
        # Relance le timer pour dans 1 heure
        self.after(FOUND_INTERVAL_MS, self._found_tick)

if __name__ == "__main__":
    app = CryptoUI()
    app.mainloop()
